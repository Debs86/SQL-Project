
DROP DATABASE if exists Project;
CREATE DATABASE IF NOT EXISTS Project;
USE Project;
set global foreign_key_checks = 1;


CREATE TABLE IF NOT EXISTS `REVIEW` (
  `REVIEW_ID` varchar(40) NOT NULL,
  `PRODUCT_ID` INTEGER NOT NULL,
  `REVIEW_DATE` date NOT NULL,
  `REVIEW_RATING` TINYINT NOT NULL,
  PRIMARY KEY (`REVIEW_ID`)
);

CREATE TABLE IF NOT EXISTS `CATEGORY` (
  `CATEGORY_ID` varchar(40) NOT NULL,
  `CATEGORY_NAME` varchar(40) DEFAULT NULL,
  `CATEGORY_DESCRIPTION` varchar(256) DEFAULT NULL,
  PRIMARY KEY (`CATEGORY_ID`)
);

CREATE TABLE IF NOT EXISTS `PRODUCT` (
  `PRODUCT_ID` INTEGER NOT NULL,
  `PRODUCT_NAME` varchar(255) NOT NULL,
  `PRODUCT_BRAND` varchar(25) DEFAULT NULL,
  `CATEGORY_ID`varchar(40) NOT NULL,
  `Product_qty` integer,
  `UNIT_PRICE` DECIMAL(8,2) DEFAULT NULL,
  PRIMARY KEY (`PRODUCT_ID`)
  );
  
 

CREATE TABLE IF NOT EXISTS `customer` (
  `CUSTOMER_ID` int NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` varchar(100) DEFAULT NULL,
  `LAST_NAME` varchar(60) DEFAULT NULL,
  `EMAIL` varchar(60) DEFAULT NULL,
  `PHONE_NUMBER` varchar(20) DEFAULT NULL,
  `DATE_OF_BIRTH` date DEFAULT NULL,
  `AGE` INTEGER DEFAULT NULL,
  `BILLING_ADDRESS` varchar(200) DEFAULT NULL,
  `ZIP_CODE` varchar(12) DEFAULT NULL,
   `SPENDING_SCORE` INTEGER DEFAULT NULL,
   `SPENDING_CATEGORY` INTEGER DEFAULT NULL,
   `COUNTRY` varchar(40) DEFAULT NULL,
  `CITY` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`CUSTOMER_ID`)
) ;

CREATE TABLE IF NOT EXISTS `order` (
  `ORDER_ID` INTEGER NOT NULL DEFAULT 0,
  `ORDER_DATE` date NOT NULL,
  `CUSTOMER_ID` INTEGER NOT NULL DEFAULT 0,
  `SUB_TOTAL` decimal(18,2) DEFAULT NULL,
  `DISCOUNT` decimal(18,2) DEFAULT NULL, 
  `TAX_RATE` decimal(2,2) DEFAULT NULL,
  `TOTAL` decimal(18,8) DEFAULT NULL,
  `PAYMENT_DATE` date NOT NULL,
  `SHIPPING_ADDRESS` varchar(80) NOT NULL,
  `SHIPPING_COMPANY` varchar(40) DEFAULT NULL,
  `TRACKING_NUMBER` varchar(40) DEFAULT NULL,
  `INVOICE_ID` INTEGER NOT NULL,
  `INVOICE_DATE` date NOT NULL,
  `COUNTRY_S` varchar(40) DEFAULT NULL,
   `CITY_S` varchar(40) DEFAULT NULL,
   `ZIP_CODE_S` varchar(12) NOT NULL DEFAULT 0,
  PRIMARY KEY (`ORDER_ID`)
) ;

CREATE TABLE IF NOT EXISTS `PRODUCT_LOG` (
  `PRODUCT_LOG_ID` int NOT NULL AUTO_INCREMENT,
  `PRODUCT_ID` INTEGER NOT NULL,
  `UNIT_PRICE` DECIMAL(8,2) DEFAULT NULL,
  `PRODUCT_LOG_DATE` date NOT NULL,
  PRIMARY KEY (`PRODUCT_LOG_ID`)
);

CREATE TABLE IF NOT EXISTS `ORDER_DETAILS` (
  `ORDER_DETAILS_ID` INTEGER NOT NULL,
  `ORDER_ID` INTEGER NOT NULL DEFAULT 0,
  `UNIT_PRICE` decimal(8,2) DEFAULT NULL,
  `PRODUCT_ID` INTEGER NOT NULL,
  `ORDER_QTY` INTEGER DEFAULT NULL,
  `SUB_TOTAL` decimal(18,2) DEFAULT NULL,
  PRIMARY KEY (`ORDER_DETAILS_ID`)
);

/*FK*/
  
ALTER TABLE `order`
ADD CONSTRAINT `fk_order_customer1`
    FOREIGN KEY (`CUSTOMER_ID`)
    REFERENCES `customer` (`CUSTOMER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;

ALTER TABLE `order_details`
ADD CONSTRAINT `fk_order_details_order1`
    FOREIGN KEY (`ORDER_ID`)
    REFERENCES `order` (`ORDER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;
    
ALTER TABLE `order_details`
ADD CONSTRAINT `fk_order_details_order2`  
    FOREIGN KEY (`PRODUCT_ID`)
    REFERENCES `PRODUCT` (`PRODUCT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;
    
ALTER TABLE `product`
ADD CONSTRAINT `fk_product_categories1`
    FOREIGN KEY (`CATEGORY_ID`)
    REFERENCES `category` (`CATEGORY_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;
     
ALTER TABLE `review`
ADD CONSTRAINT `fk_review_product1`
    FOREIGN KEY (`PRODUCT_ID`)
    REFERENCES `product` (`PRODUCT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;

ALTER TABLE `product_log`
ADD CONSTRAINT `fk_product_log_inventory1`
    FOREIGN KEY (`PRODUCT_ID`)
    REFERENCES `PRODUCT` (`PRODUCT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;
 
/*INSERT DATA*/
INSERT INTO `customer` VALUES (1,'Maria','Santos','maria.santos@outlook.com','919706312','1994-12-23',25,'R. Carlos da Maia 38','1350-032',80,4,'PORTUGAL','LISBOA'),(2,'Ana','Castro','ana.castro@outlook.com','928050418','1972-01-07',48,'R. Sacramento à Lapa 3','1200-757',80,4,'PORTUGAL','LISBOA'),(3,'Beatriz','Lourenç','beatriz.lourenço@gmail.co','931067222','1985-05-06',35,'R. Paulo Falcão 206','2775-218',40,2,'PORTUGAL','PAREDE'),(4,'Matilde','Azevedo','matilde.azevedo@hotmail.com','974594350','1995-01-23',25,'R. Dom Diniz 23','2765-295',20,1,'PORTUGAL','ESTORIL'),(5,'Leonor','Pires','leonor.pires@icloud.com','922304151','1982-03-28',38,'R. Bartolomeu Dias 8','3030-041',60,3,'PORTUGAL','COIMBRA'),(6,'Francisco','Gaspar','francisco.gaspar@gmail.com','930783333','1964-01-21',56,'R. Dr. António Oliveira Braga 2','4715-307',60,3,'PORTUGAL','NOGUEIRO'),(7,'Diogo','Gonçalve','diogo.gonçalves@icloud.co','919101131','1997-07-19',23,'R. Nova de São Crispim 17','4350-169',80,4,'PORTUGAL','PORTO'),(8,'Santiago','Ferreira','santiago.ferreira@gmail.com','985848501','1993-09-20',27,'R. Bento de Jesus Caraça ','8200-005',80,4,'PORTUGAL','ALBUFEIRA'),(9,'Rodrigo','Guerreiro','rodrigo.guerreiro@icloud.com','944398999','1999-02-10',21,'R. de São Pedro 3','7860-043',60,3,'PORTUGAL','MOURA'),(10,'Afonso','Tavares','afonso.tavares@icloud.com','978300504','1967-02-22',53,'Calle Hornos de Medina, 18','6007',100,5,'ESPANHA','BADAJOZ');
INSERT INTO `category`VALUES ('25','Computers','Computers, Desktops Workstations, Desktop Computers & Notebooks'),('26','Video & Home Audio','Surround Speakers, TV, Video & Home Audio'),('28','Bluetooth & Wireless Speakers','Portable Bluetooth Speakers,Bluetooth & Wireless Speakers'),('35','Headphones','Headphones,Over-Ear Headphones,Audio,Over-Ear & On-Ear Headphones'),('36','Computer Components','Computers Accessories & Computer Components'),('37','Wireless Networking','Wireless Networking'),('40','Photography','Photography,Photography Bags Cases,Camera Bags,Backpacks,Backpacks'),('47','Auto Electronics','Auto & Tires, Auto Electronics, Car Speakers and Subwoofers'),('48','Office Technology','Office,Office Technology,Phones & Accessories');
INSERT INTO `order` VALUES (1,'2019-03-20',5,3380.00,0.00,0.23,4157.40000000,'2019-03-22','R. Bartolomeu Dias 8','CTT','45453398103564',1342,'2019-03-25','PORTUGAL','COIMBRA','3030-041'),(2,'2019-05-12',2,1329.00,0.01,0.23,1618.32000000,'2019-05-14','Calle Begonia, 7','MRW','79292935577816',4998,'2019-05-15','ESPANHA','SEVILLA','41008'),(3,'2019-11-20',1,536.00,0.01,0.23,652.69000000,'2019-11-22','R. Álvaro de Campos 19 ','CTT','88523239943006',1053,'2019-11-22','PORTUGAL','TAVIRA','8800-320'),(4,'2019-02-24',2,1570.00,0.04,0.23,1853.86000000,'2019-02-27','R. Sacramento à Lapa 3','CTT','92439935784919',1486,'2019-02-28','PORTUGAL','LISBOA','1200-757'),(5,'2019-08-06',5,736.00,0.01,0.23,896.23000000,'2019-08-08','R. Bartolomeu Dias 8','DHL','66884468940684',4272,'2019-08-09','PORTUGAL','COIMBRA','3030-041'),(6,'2020-01-08',4,167.00,0.00,0.23,205.41000000,'2020-01-10','R. Gago Coutinho e Sacadura Cabral 32','CTT','53825745118213',1704,'2020-01-13','PORTUGAL','PALMELA','2950-250'),(7,'2019-04-17',6,1101.00,0.02,0.23,1327.15000000,'2019-04-18','R. Dr. António Oliveira Braga 2','CTT','56400905510017',3512,'2019-04-19','PORTUGAL','NOGUEIRO','4715-307'),(8,'2020-07-11',1,892.00,0.04,0.23,1053.27000000,'2020-07-12','R. Carlos da Maia 38','CTT','43164478236814',3525,'2020-07-15','PORTUGAL','LISBOA','1350-032'),(9,'2020-01-19',2,2168.00,0.04,0.23,2559.97000000,'2020-01-21','R. Sacramento à Lapa 3','CTT','90721773346178',3026,'2020-01-22','PORTUGAL','LISBOA','1200-757'),(10,'2020-07-18',9,1074.00,0.00,0.23,1321.02000000,'2020-07-18','R. Arzila 7','DHL','72448177136500',1417,'2020-07-20','PORTUGAL','ALMADA','2805-036'),(11,'2019-05-14',7,3207.00,0.01,0.23,3905.16000000,'2019-05-17','R. Nova de São Crispim 17','DHL','30170019749294',2336,'2019-05-20','PORTUGAL','PORTO','4350-169'),(12,'2019-03-31',5,2725.00,0.04,0.23,3217.68000000,'2019-04-03','R. Fernando Namora 12','DHL','43056572968484',2177,'2019-04-04','PORTUGAL','CAPARICA','2825-076'),(13,'2020-04-15',8,719.00,0.02,0.23,866.68000000,'2020-04-16','R. Francisco Manuel de Melo 3','CTT','3765465922079',2483,'2020-04-17','PORTUGAL','OEIRAS','2780-261'),(14,'2020-02-25',7,1370.00,0.02,0.23,1651.40000000,'2020-02-25','R. Nova de São Crispim 17','CTT','60493608027932',4742,'2020-02-26','PORTUGAL','PORTO','4350-169'),(15,'2019-02-26',8,350.00,0.01,0.23,426.20000000,'2019-02-27','Estr. São Romão','CTT','92761271689372',1762,'2019-02-28','PORTUGAL','SINTRA','2725-133'),(16,'2019-07-28',8,841.00,0.05,0.23,982.71000000,'2019-07-30','R. Bento de Jesus Caraça ','MRW','17638571070187',4331,'2019-07-31','PORTUGAL','ALBUFEIRA','8200-005'),(17,'2019-02-14',9,1090.00,0.04,0.23,1287.07000000,'2019-02-16','R. de São Pedro 3','CTT','46355803327414',1287,'2019-02-18','PORTUGAL','MOURA','7860-043'),(18,'2020-08-21',3,626.00,0.00,0.23,769.98000000,'2020-08-22','R. Paulo Falcão 206','MRW','83522193536666',3339,'2020-08-25','PORTUGAL','PAREDE','2775-218'),(19,'2019-08-21',5,2844.00,0.05,0.23,3323.21000000,'2019-08-23','R. Bartolomeu Dias 8','CTT','18260000295579',3478,'2019-08-23','PORTUGAL','COIMBRA','3030-041'),(20,'2020-03-17',1,6182.00,0.01,0.23,7527.82000000,'2020-03-19','R. 15 de Agosto 51','CTT','74063298743870',2532,'2020-03-20','PORTUGAL','CALDAS DA RAINHA','2500-852'),(21,'2020-06-17',10,433.00,0.00,0.23,532.59000000,'2020-06-20','Calle Hornos de Medina, 18','CTT','66239342604303',2093,'2020-06-22','ESPANHA','BADAJOZ','6007'),(22,'2019-04-06',2,4277.00,0.00,0.23,5260.71000000,'2019-04-09','R. Diogo Macedo 127','CTT','44217187408287',4917,'2019-04-10','PORTUGAL','PORTO','4430-999'),(23,'2020-11-21',2,3468.00,0.04,0.23,4095.01000000,'2020-11-23','R. Sacramento à Lapa 3','DHL','41149269666482',4681,'2020-11-24','PORTUGAL','LISBOA','1200-757'),(24,'2019-07-10',5,178.00,0.05,0.23,207.99000000,'2019-07-11','R. Bartolomeu Dias 8','DHL','36882781267764',4138,'2019-07-12','PORTUGAL','COIMBRA','3030-041'),(25,'2019-09-20',8,7900.00,0.00,0.23,9717.00000000,'2019-09-22','R. Bento de Jesus Caraça ','DHL','97758600769951',3136,'2019-09-23','PORTUGAL','ALBUFEIRA','8200-005'),(26,'2019-02-22',5,1798.00,0.01,0.23,2189.42000000,'2019-02-24','R. da Devesa 255','DHL','92785340990773',2234,'2019-02-25','PORTUGAL','VILA NOVA DE GAIA','4430-684'),(27,'2019-05-10',10,3805.00,0.01,0.23,4633.35000000,'2019-05-13','Calle Hornos de Medina, 18','CTT','78856346440086',2103,'2019-05-14','ESPANHA','BADAJOZ','6007'),(28,'2020-11-28',6,2288.00,0.05,0.23,2673.53000000,'2020-11-28','R. Dr. António Oliveira Braga 2','CTT','94770181372125',3004,'2020-11-30','PORTUGAL','NOGUEIRO','4715-307'),(29,'2020-06-21',5,1436.00,0.00,0.23,1766.28000000,'2020-06-22','R. Bartolomeu Dias 8','MRW','9361054767332',3451,'2020-06-23','PORTUGAL','COIMBRA','3030-041'),(30,'2020-08-21',10,8516.00,0.01,0.23,10369.93000000,'2020-08-23','R. de Carlos da Maia 180','CTT','90807981674270',3254,'2020-08-24','PORTUGAL','PORTO','4200-150');
INSERT INTO `product` VALUES (374,'Power Acoustik - Gothic Series 10\" Dual-Voice-Coil 2-Ohm Subwoofer - Black','Power Acoustik','47',14,790.00),(619,'Nighthawk AC1900 Dual-Band Wi-Fi USB Adapter','Netgear','37',20,226.00),(992,'SAMSUNG 40\'\' Class FHD (1080P) Smart LED TV (UN40M5300)','Samsung','26',6,3647.00),(1212,'Alpine','Glengery','47',12,666.00),(1322,'House of Marley EM-DH003-PS TTR Noise-Cancelling Over-Ear Headphones (Black)','House of Marley','35',5,278.00),(1516,'SRS-ZR7 Wireless Speaker','Sony','28',19,158.00),(1704,'Prime Three-Way Center Channel Speaker (Premium Black Ash)','SVS','28',12,175.00),(1730,'DreamWave - Tremor Portable Bluetooth Speaker - Green,Black','DreamWave','28',7,380.00),(2017,'Air-Fi Runaway AF32 Stereo Bluetooth Wireless Headphones with Hidden Microphone (White)','MEE audio','35',17,233.00),(2281,'Sanus VLF410B1 10-Inch Super Slim Full-Motion Mount for 37 - 84 Inches TV\'s','Sanus','28',7,341.00),(2427,'Flipside 300 Backpack (Black)','Lowepro','36',12,98.00),(2756,'Corsair CMSA8GX3M2A1066C7 Apple 8 GB Dual Channel Kit DDR3 1066 (PC3 8500) 204-Pin DDR3 Laptop SO-DIMM Memory 1.5V','Corsair','36',16,125.00),(2827,'Verizon MiFi 6620L Jetpack 4G LTE Mobile Hotspot (Verizon Wireless)','Verizon Wireless','36',19,151.00),(2974,'JBL - 6\" x 8\" 2-Way Coaxial Car Speakers with Polypropylene Cones (Pair) - Black','JBL','47',11,778.00),(3126,'Kicker 41IK5BT2V2 Amphitheater High-Performance Audio System with Bluetooth, Black','Kicker','28',12,371.00),(4077,'PNY Anarchy 16GB Kit (2x8GB) DDR4 2400MHz (PC4-19200) CL15 Desktop Memory (BLUE) - MD16GK2D4240015AB','Pny','36',9,175.00),(4174,'Toshiba - 3TB Internal Serial ATA III Hard Drive for Desktops','Toshiba','36',6,185.00),(4548,'Slingbox M2','Sling Media','26',13,200.00),(4698,'Bowers & Wilkins P7 Wired Over Ear Headphones','Bowers & Wilkins','35',9,370.00),(4781,'Sony LBT-GPX555 Mini-System with Bluetooth and NFC','Sony','26',20,264.00),(4805,'Clarity - Super-Loud Phone Ringer - White','CLARITY-TELECOM','48',15,249.00),(5301,'Alpine - 6-1/2\" 2-Way Coaxial Car Speakers with Polypropylene Cones (Pair) - Black','Alpine','47',16,418.00),(5417,'Midland Weather Alert Radio, 1.0 CT','Midland','26',5,50.00),(5423,'The Rebel BT On-Ear Wireless Bluetooth Headphones (Black)','House of Marley','35',6,63.00),(5499,'Boytone - 2500W 2.1-Ch. Home Theater System - Black Diamond','Boytone','26',15,502.00),(5515,'Lenovo - AC Adapter for Select Lenovo Yoga Laptops - Black','Lenovo','36',11,40.00),(5916,'Logitech 915-000224  Harmony Ultimate One 15-Device Universal Infrared Remote with Customizable Touch Screen Control - Black','Logitech','26',11,300.00),(5946,'JVC KD-X320BTS Apple iPod and Android Digital Media Receiver with Bluetooth','JVC','47',8,765.00),(5980,'NS-SP1800BL 5.1-Channel Home Theater System (Black)','Yamaha','26',7,228.00),(6487,'Sony SRSXB30/BLK XB30 Portable Wireless Speaker with Bluetooth','Sony','28',15,474.00),(6633,'Sony SRSHG1/BLK Hi-Res Wireless Speaker- Charcoal black','Sony','28',7,347.00),(6666,'Samsung Universal 3100mAh Portable External Battery Charger - White','Samsung','26',6,543.00),(6750,'Travel RockStar 3-in-1 2A USB and Dual-Outlet Wall Charger with Internal 3000mAh Battery Pack','Belkin','47',7,178.00),(6899,'Logitech G403 Wireless Gaming Mouse with High Performance Gaming Sensor','Logitech','36',12,53.00),(7047,'Microsoft Surface Pro 4 Type Cover with Fingerprint ID','Microsoft','25',12,1665.00),(7060,'Everest Elite 700 Around-Ear Wireless Headphones (White)','JBL','35',3,196.00),(7425,'Sony MEXM100BT 160W RMS Marine CD Receiver with Bluetooth (Black) and SiriusXM Ready','Sony','47',4,645.00),(7444,'XPS 8920 Tower Desktop Computer','Dell','25',3,2782.00),(7607,'SiriusXM SXEZR1V1 XM Onyx EZR Satellite Radio Receiver with Vehicle Kit','Siriusxm','47',13,167.00),(7867,'Round LCD/Projector Ceiling Plate - Black','Peerless-AV','36',20,178.00),(7897,'Toshiba Micro Component Speaker System: Wireless Bluetooth Speaker Sound System with FM','Toshiba','28',20,456.00),(7955,'iHome Rechargeable Splash Proof Stereo Bluetooth Speaker - Black (IBT33BC)','Sdi Technologies, Inc.','28',12,471.00),(7993,'NS-IW480CWH In-Ceiling 8 Natural Sound Three-Way Speaker System (Pair)','Yamaha','26',18,675.00),(8002,'AW6500 All-Weather Outdoor Speaker (White, Single)','Definitive Technology','28',19,698.00),(8089,'Motorola Wi-Fi Pet Video Camera','Motorola','36',20,80.00),(8811,'2TB Red 5400 rpm SATA III 3.5 Internal NAS HDD','WD','36',11,191.00),(9127,'Ultimate Ears MEGABLAST Portable Wi-Fi/Bluetooth Speaker with hands-free Amazon Alexa voice control (waterproof) - Graphite Black','Ultimate Ears','28',19,428.00),(9454,'Acoustimass 6 Series V Home Theater Speaker System (Black)','Bose','26',16,959.00);
INSERT INTO `product_log` VALUES (1,7060,180.00,'2019-01-18'),(2,8089,75.00,'2019-01-26'),(3,7867,160.00,'2019-02-04'),(4,6633,320.00,'2019-03-20'),(5,4548,185.00,'2019-04-03'),(6,6487,450.00,'2019-04-10'),(7,5946,715.00,'2019-05-06'),(8,7993,650.00,'2019-05-26'),(9,7060,196.00,'2019-06-26'),(10,2827,140.00,'2019-08-21'),(11,6487,474.00,'2019-09-01'),(12,5916,280.00,'2019-09-30'),(13,5916,300.00,'2019-10-19'),(14,6633,347.00,'2019-10-26'),(15,8089,80.00,'2019-11-07'),(16,4548,195.00,'2019-11-24'),(17,7993,675.00,'2019-12-04'),(18,5946,765.00,'2019-12-06'),(19,4548,200.00,'2019-12-06'),(20,1704,175.00,'2020-01-19'),(21,6750,178.00,'2020-02-26'),(22,2017,233.00,'2020-05-29'),(23,7867,178.00,'2020-06-15'),(24,1516,158.00,'2020-06-20'),(25,8811,191.00,'2020-06-28'),(26,2827,151.00,'2020-07-06'),(27,5980,228.00,'2020-08-16'),(28,8002,698.00,'2020-09-29'),(29,2281,341.00,'2020-10-16'),(30,1212,666.00,'2020-10-17');
INSERT INTO `order_details` VALUES (1,7,228.00,5980,2,456.00),(2,28,185.00,4174,2,370.00),(3,25,167.00,7607,1,167.00),(4,23,778.00,2974,2,1556.00),(5,11,300.00,5916,1,300.00),(6,24,178.00,7867,1,178.00),(7,2,191.00,8811,1,191.00),(8,9,418.00,5301,2,836.00),(9,26,191.00,8811,1,191.00),(10,16,63.00,5423,1,63.00),(11,4,80.00,8089,1,80.00),(12,18,98.00,2427,1,98.00),(13,25,264.00,4781,1,264.00),(14,20,418.00,5301,2,836.00),(15,13,418.00,5301,1,418.00),(16,3,228.00,5980,2,456.00),(17,14,50.00,5417,1,50.00),(18,22,178.00,6750,1,178.00),(19,13,63.00,5423,2,126.00),(20,19,80.00,8089,1,80.00),(21,19,167.00,7607,2,334.00),(22,26,371.00,3126,1,371.00),(23,6,167.00,7607,1,167.00),(24,17,370.00,4698,2,740.00),(25,20,428.00,9127,1,428.00),(26,8,63.00,5423,2,126.00),(27,19,698.00,8002,1,698.00),(28,5,380.00,1730,1,380.00),(29,1,347.00,6633,1,347.00),(30,3,80.00,8089,1,80.00),(31,30,645.00,7425,2,1290.00),(32,18,175.00,1704,2,350.00),(33,20,300.00,5916,2,600.00),(34,5,178.00,7867,2,356.00),(35,8,158.00,1516,2,316.00),(36,1,125.00,2756,1,125.00),(37,12,341.00,2281,1,341.00),(38,1,675.00,7993,2,1350.00),(39,2,341.00,2281,2,682.00),(40,12,1665.00,7047,1,1665.00),(41,12,666.00,1212,1,666.00),(42,20,3647.00,992,1,3647.00),(43,19,191.00,8811,2,382.00),(44,17,175.00,4077,2,350.00),(45,25,175.00,1704,1,175.00),(46,27,158.00,1516,1,158.00),(47,25,3647.00,992,2,7294.00),(48,30,347.00,6633,2,694.00),(49,21,380.00,1730,1,380.00),(50,1,645.00,7425,1,645.00),(51,29,418.00,5301,2,836.00),(52,1,233.00,2017,2,466.00),(53,30,151.00,2827,2,302.00),(54,21,53.00,6899,1,53.00),(55,19,675.00,7993,2,1350.00),(56,30,2782.00,7444,2,5564.00),(57,30,666.00,1212,1,666.00),(58,1,341.00,2281,1,341.00),(59,23,778.00,2974,2,1556.00),(60,4,200.00,4548,2,400.00),(61,1,53.00,6899,2,106.00),(62,26,765.00,5946,1,765.00),(63,16,778.00,2974,1,778.00),(64,20,471.00,7955,1,471.00),(65,2,228.00,5980,2,456.00),(66,7,645.00,7425,1,645.00),(67,22,226.00,619,2,452.00),(68,20,200.00,4548,1,200.00),(69,27,3647.00,992,1,3647.00),(70,22,3647.00,992,1,3647.00),(71,9,666.00,1212,2,1332.00),(72,14,502.00,5499,2,1004.00),(73,23,178.00,7867,2,356.00),(74,12,53.00,6899,1,53.00),(75,28,959.00,9454,2,1918.00),(76,4,300.00,5916,1,300.00),(77,11,1665.00,7047,1,1665.00),(78,8,50.00,5417,1,50.00),(79,4,790.00,374,1,790.00),(80,29,300.00,5916,2,600.00),(81,10,167.00,7607,2,334.00),(82,26,471.00,7955,1,471.00),(83,13,175.00,4077,1,175.00),(84,15,175.00,4077,2,350.00),(85,8,200.00,4548,2,400.00),(86,18,178.00,6750,1,178.00),(87,10,370.00,4698,2,740.00),(88,11,471.00,7955,2,942.00),(89,11,300.00,5916,1,300.00),(90,14,158.00,1516,2,316.00);
INSERT INTO `review` VALUES ('1',4077,'2019-06-23',1),('10',1730,'2019-07-26',2),('100',374,'2019-08-29',1),('101',3126,'2020-08-06',3),('102',2281,'2019-11-22',1),('103',6666,'2020-08-29',5),('104',4174,'2019-10-30',1),('105',374,'2020-09-23',3),('106',6633,'2020-06-02',4),('107',1212,'2019-07-21',2),('108',7047,'2019-06-03',2),('109',6666,'2019-05-15',2),('11',4548,'2020-04-10',5),('110',1704,'2019-08-21',5),('111',5301,'2019-10-23',3),('112',6487,'2020-08-22',2),('113',4781,'2019-10-28',2),('114',1516,'2019-04-17',3),('115',4805,'2020-12-03',1),('116',9127,'2020-05-22',2),('117',6487,'2020-05-25',5),('118',6750,'2019-08-19',5),('119',1730,'2019-04-26',2),('12',4698,'2020-05-21',5),('120',7607,'2019-11-24',3),('121',4548,'2020-05-01',3),('122',7993,'2019-11-17',1),('123',8002,'2019-06-02',2),('124',2427,'2020-08-13',1),('125',2974,'2020-08-26',3),('126',8089,'2019-09-20',1),('127',4077,'2019-05-05',5),('128',4548,'2020-11-22',3),('129',619,'2020-10-30',3),('13',7047,'2020-05-05',4),('130',7425,'2019-09-23',1),('131',374,'2020-01-04',2),('132',1516,'2019-04-30',1),('133',619,'2020-09-27',5),('134',6666,'2020-02-21',1),('135',5946,'2019-03-11',1),('136',374,'2020-03-01',2),('137',7607,'2020-06-26',1),('138',2974,'2019-04-16',2),('139',7897,'2020-04-15',1),('14',3126,'2019-03-15',1),('140',8089,'2020-02-22',5),('141',3126,'2019-09-17',3),('142',5423,'2019-08-31',4),('143',7425,'2020-06-18',2),('144',374,'2020-08-27',3),('145',7955,'2020-03-06',3),('146',4805,'2020-05-08',5),('147',3126,'2020-05-06',3),('148',374,'2019-10-30',5),('149',7060,'2019-07-12',3),('15',7897,'2019-08-08',2),('150',8089,'2020-05-11',5),('151',4805,'2020-05-16',4),('152',1516,'2020-07-14',5),('153',1212,'2020-05-03',2),('154',7867,'2019-12-01',4),('155',1516,'2019-10-12',5),('156',4174,'2020-11-26',3),('157',619,'2020-11-26',2),('158',6899,'2020-08-30',2),('159',6899,'2019-04-22',3),('16',7993,'2019-10-04',2),('160',374,'2020-09-15',2),('161',5499,'2020-06-17',4),('162',374,'2019-09-05',2),('163',6487,'2020-03-24',5),('164',1730,'2019-10-09',4),('165',5980,'2019-09-24',2),('166',5423,'2020-06-10',3),('167',5423,'2020-11-12',1),('168',2827,'2019-03-19',1),('169',2827,'2020-06-18',1),('17',8002,'2020-04-04',5),('170',6633,'2020-03-29',1),('171',9454,'2020-11-24',5),('172',7897,'2019-11-05',4),('173',7425,'2019-10-26',5),('174',7444,'2020-09-30',2),('175',6487,'2020-05-19',1),('176',4698,'2020-11-04',2),('177',2427,'2020-09-07',1),('178',374,'2019-07-15',3),('179',5916,'2020-07-10',2),('18',7993,'2019-11-11',2),('180',6666,'2019-06-19',3),('181',6487,'2019-09-08',2),('182',5417,'2019-11-25',1),('183',4781,'2019-07-25',5),('184',8811,'2020-06-16',3),('185',7425,'2020-04-12',3),('186',7607,'2020-10-01',4),('187',7047,'2019-05-22',3),('188',8811,'2019-09-04',4),('189',619,'2019-06-05',2),('19',4174,'2020-01-26',1),('190',2827,'2019-04-29',3),('191',7607,'2020-09-19',2),('192',7425,'2020-10-12',5),('193',1516,'2020-02-02',1),('194',1730,'2019-04-10',4),('195',5916,'2019-12-22',5),('196',4781,'2019-09-15',4),('197',2827,'2019-09-18',4),('198',9127,'2020-08-22',3),('199',7444,'2019-09-12',2),('2',4077,'2020-07-27',1),('20',1322,'2019-08-28',3),('200',7047,'2020-03-11',5),('201',2017,'2019-12-22',3),('202',2827,'2020-09-22',3),('203',4805,'2020-07-20',4),('204',4805,'2020-10-15',2),('205',5515,'2020-05-12',4),('206',374,'2019-11-08',4),('207',2974,'2020-02-27',2),('208',5417,'2019-04-15',3),('209',1322,'2020-10-31',3),('21',3126,'2019-03-11',1),('210',1516,'2019-09-14',2),('211',5423,'2020-03-03',3),('212',9454,'2020-07-04',4),('213',4781,'2020-05-27',3),('214',7867,'2019-05-22',2),('215',4781,'2019-10-05',1),('216',7607,'2019-04-12',4),('217',1730,'2020-12-10',1),('218',6899,'2019-04-04',2),('219',1212,'2020-04-15',4),('22',5417,'2020-07-15',2),('220',5423,'2020-11-24',3),('221',1322,'2020-01-22',1),('222',4174,'2020-03-22',3),('223',7955,'2020-02-25',3),('224',2281,'2020-07-28',5),('225',8089,'2020-10-27',5),('226',1516,'2020-11-11',4),('227',5499,'2020-07-31',5),('228',6750,'2020-12-06',5),('229',5417,'2019-04-23',5),('23',7607,'2020-04-12',1),('230',6899,'2020-11-11',2),('231',7955,'2019-10-04',1),('232',7867,'2020-10-04',1),('233',8811,'2019-04-16',4),('234',7955,'2020-09-23',3),('235',5423,'2019-11-03',3),('236',4174,'2020-11-24',1),('237',6899,'2020-03-15',2),('238',1322,'2019-06-07',3),('239',5423,'2019-06-30',2),('24',4805,'2019-08-02',2),('240',6666,'2020-05-10',4),('241',6633,'2019-08-12',4),('242',8811,'2019-08-15',4),('243',6750,'2019-04-02',3),('244',7607,'2020-04-10',4),('245',7897,'2019-08-09',2),('246',5301,'2020-04-11',2),('247',5499,'2020-04-05',1),('248',619,'2020-01-29',2),('249',6750,'2019-12-09',5),('25',7897,'2019-05-03',4),('250',1322,'2020-05-16',3),('251',8811,'2019-04-03',4),('252',2827,'2019-07-24',1),('253',2017,'2020-07-02',4),('254',5946,'2019-12-18',2),('255',3126,'2020-05-09',5),('256',1322,'2019-05-07',1),('257',1516,'2020-05-05',1),('258',7897,'2019-09-18',3),('259',6750,'2020-06-25',3),('26',5980,'2019-10-28',1),('260',7867,'2020-04-07',1),('261',4174,'2019-04-25',1),('262',7047,'2020-09-07',5),('263',2827,'2020-09-15',4),('264',2427,'2019-12-02',1),('265',4805,'2019-03-14',2),('266',2756,'2020-03-07',2),('267',6750,'2019-09-18',4),('268',2017,'2020-04-13',4),('269',5916,'2020-06-08',1),('27',9127,'2020-04-17',3),('270',7425,'2020-05-18',5),('271',6899,'2019-12-11',2),('272',6666,'2019-08-25',3),('273',1704,'2019-05-18',5),('274',5916,'2020-01-09',3),('275',3126,'2020-05-26',2),('276',992,'2019-06-05',2),('277',374,'2020-03-29',4),('278',1212,'2020-09-13',3),('279',1730,'2020-01-16',1),('28',4548,'2020-04-26',5),('280',5916,'2020-10-22',5),('281',4548,'2020-08-31',1),('282',7607,'2020-09-18',2),('283',7047,'2020-06-09',1),('284',2281,'2020-10-12',3),('285',1730,'2019-10-06',5),('286',7607,'2019-10-31',2),('287',5301,'2019-04-29',1),('288',4174,'2019-09-07',2),('289',8002,'2020-12-05',2),('29',4174,'2019-05-30',5),('290',5916,'2019-04-26',4),('291',8811,'2020-08-21',4),('292',992,'2020-06-03',5),('293',7607,'2019-05-25',2),('294',4781,'2020-11-23',1),('295',5946,'2020-10-30',5),('296',2827,'2020-10-16',5),('297',619,'2020-08-31',4),('298',5301,'2019-12-15',4),('299',2756,'2020-10-29',5),('3',6666,'2020-04-15',2),('30',5946,'2019-04-06',2),('300',7425,'2020-11-20',1),('301',7955,'2019-04-29',2),('302',4698,'2020-11-28',3),('303',4698,'2019-07-25',3),('304',6666,'2019-11-19',3),('305',3126,'2020-07-04',2),('306',5980,'2019-10-02',5),('307',619,'2019-06-11',1),('308',1704,'2020-09-02',2),('309',5301,'2020-12-06',3),('31',5499,'2019-04-05',1),('310',8089,'2019-03-29',3),('311',1516,'2020-04-10',2),('312',6633,'2020-05-02',4),('313',9127,'2020-11-19',1),('314',5417,'2019-04-13',1),('315',6633,'2020-04-15',2),('316',2827,'2020-01-09',3),('317',5301,'2020-08-02',5),('318',5423,'2020-06-12',5),('319',7993,'2019-09-02',3),('32',2827,'2020-07-16',4),('320',1212,'2020-08-01',3),('321',7425,'2019-10-06',4),('322',8811,'2020-06-10',5),('323',6666,'2020-02-26',1),('324',7897,'2020-11-29',1),('325',2827,'2020-03-09',4),('326',7047,'2020-03-04',5),('327',7955,'2019-10-23',3),('328',4077,'2019-11-22',1),('329',619,'2020-10-22',5),('33',7047,'2020-07-17',5),('330',4781,'2020-12-10',5),('331',6899,'2020-08-27',4),('332',8089,'2020-12-02',5),('333',4174,'2019-07-05',2),('334',2281,'2020-05-27',1),('335',4698,'2020-11-27',5),('336',4548,'2019-12-21',5),('337',1212,'2019-04-17',3),('338',1322,'2019-11-11',2),('339',5916,'2020-03-14',3),('34',7060,'2020-10-21',2),('340',2827,'2019-10-25',3),('341',2017,'2020-10-24',4),('342',1730,'2020-10-09',2),('343',7444,'2020-02-25',2),('344',5417,'2019-04-24',4),('345',4781,'2020-10-19',1),('346',4698,'2020-07-08',2),('347',1704,'2020-10-13',1),('348',7955,'2020-01-08',2),('349',619,'2019-08-24',3),('35',2427,'2020-09-28',1),('350',2281,'2019-05-07',3),('351',6750,'2020-11-08',1),('352',4781,'2019-09-06',5),('353',6487,'2020-10-08',4),('354',4077,'2019-10-03',1),('355',1322,'2020-08-12',3),('356',5946,'2019-08-15',3),('357',1516,'2019-10-15',1),('358',4698,'2019-07-01',5),('359',3126,'2019-07-13',5),('36',6750,'2019-04-13',3),('360',4698,'2020-01-24',2),('361',4698,'2019-03-19',2),('362',7955,'2019-03-08',5),('363',5515,'2019-04-07',5),('364',6487,'2019-05-08',3),('365',7060,'2019-03-13',1),('366',4077,'2019-08-11',3),('367',8811,'2019-08-22',4),('368',9454,'2020-03-25',2),('369',2017,'2019-07-14',5),('37',7607,'2019-08-05',1),('370',619,'2019-07-13',3),('371',6666,'2020-08-19',1),('372',5423,'2020-08-31',5),('373',7607,'2019-10-05',3),('374',7607,'2019-08-31',5),('375',2017,'2020-09-04',2),('376',1322,'2019-10-05',3),('377',4781,'2019-08-12',2),('378',4077,'2019-06-22',5),('379',5916,'2020-06-27',4),('38',8002,'2019-05-03',3),('380',5515,'2020-06-13',5),('381',374,'2019-12-30',4),('382',8002,'2019-11-20',2),('383',2427,'2019-11-26',3),('384',2017,'2019-03-25',1),('385',7897,'2019-07-18',4),('386',1322,'2020-11-29',2),('387',7897,'2020-09-06',4),('388',7955,'2019-06-28',1),('389',4548,'2020-03-12',4),('39',7867,'2020-03-03',4),('390',8002,'2019-08-11',1),('391',7867,'2020-02-07',4),('392',619,'2019-09-06',1),('393',2281,'2019-11-21',4),('394',2974,'2019-07-21',1),('395',1730,'2019-09-27',3),('396',1212,'2019-08-19',4),('397',2756,'2019-10-20',4),('398',6633,'2020-07-27',5),('399',7060,'2019-10-19',4),('4',4698,'2020-11-19',5),('40',5423,'2020-05-22',1),('400',7425,'2020-08-16',3),('401',1516,'2020-11-05',3),('402',5515,'2020-11-19',4),('403',1322,'2020-05-24',2),('404',1212,'2020-02-23',1),('405',2427,'2020-10-15',2),('406',8089,'2020-06-17',3),('407',8811,'2019-09-12',2),('408',1322,'2020-11-14',4),('409',4781,'2020-04-20',3),('41',2017,'2019-11-28',2),('410',5980,'2020-06-19',4),('411',2756,'2020-01-31',2),('412',2974,'2019-04-05',1),('413',2017,'2020-05-17',5),('414',2756,'2019-12-11',4),('415',5423,'2020-07-09',4),('416',4174,'2020-09-30',5),('417',4174,'2020-06-24',3),('418',7047,'2019-10-03',3),('419',1212,'2020-10-21',3),('42',6750,'2020-09-20',2),('420',7425,'2020-06-22',2),('421',1212,'2020-10-25',1),('422',2974,'2020-11-07',3),('423',2756,'2020-11-04',4),('424',1516,'2020-04-28',2),('425',1322,'2019-05-19',5),('426',5946,'2020-10-19',5),('427',1212,'2020-10-12',1),('428',5301,'2019-08-07',3),('429',1212,'2019-12-30',4),('43',7444,'2020-02-25',3),('430',6899,'2020-09-07',4),('431',7060,'2020-03-21',4),('432',5916,'2019-12-31',4),('433',9127,'2020-06-11',3),('434',4548,'2020-08-13',2),('435',8002,'2019-07-26',5),('436',4548,'2019-07-29',1),('437',6666,'2020-04-04',5),('438',4174,'2019-05-15',4),('439',6633,'2019-06-13',2),('44',6666,'2019-08-03',5),('440',2974,'2020-10-06',5),('441',8002,'2019-10-21',2),('442',7867,'2019-12-15',1),('443',1730,'2020-12-01',1),('444',1730,'2020-09-26',1),('445',5423,'2020-08-18',1),('446',6750,'2020-04-01',5),('447',1212,'2020-07-13',5),('448',6633,'2019-06-19',2),('449',1322,'2020-05-06',1),('45',1212,'2019-07-01',3),('450',4781,'2020-10-04',1),('451',6899,'2020-07-14',5),('452',374,'2020-05-11',5),('453',2281,'2020-10-16',4),('454',2017,'2020-10-21',2),('455',2974,'2020-04-18',5),('456',6750,'2019-06-17',1),('457',6750,'2019-09-29',4),('458',5423,'2019-12-16',4),('459',5301,'2019-08-03',3),('46',7955,'2019-03-11',3),('460',8002,'2019-10-02',4),('461',374,'2020-01-02',2),('462',6487,'2019-07-10',3),('463',5417,'2020-03-31',3),('464',6750,'2020-04-25',4),('465',5301,'2019-10-23',4),('466',5515,'2020-11-06',2),('467',9127,'2020-06-04',3),('468',1322,'2019-03-27',3),('469',7425,'2020-06-29',2),('47',5301,'2020-02-01',1),('470',2756,'2019-05-10',4),('471',7607,'2020-09-12',5),('472',1730,'2019-11-14',3),('473',3126,'2020-08-26',1),('474',8089,'2019-11-02',3),('475',7897,'2019-08-27',1),('476',6899,'2019-05-12',4),('477',4781,'2020-04-16',5),('478',5423,'2020-05-25',4),('479',6750,'2019-03-11',3),('48',1322,'2019-05-05',3),('480',7060,'2020-01-10',5),('481',1212,'2019-04-02',3),('482',1730,'2019-06-24',4),('483',4781,'2020-10-14',2),('484',6487,'2019-04-02',5),('485',5515,'2019-12-28',5),('486',8002,'2020-07-25',5),('487',4781,'2019-11-17',2),('488',5515,'2019-05-12',5),('489',7993,'2019-03-18',1),('49',7060,'2019-11-18',5),('490',5916,'2020-09-12',2),('491',5980,'2020-04-21',4),('492',6750,'2020-07-30',1),('493',7607,'2020-06-09',5),('494',7955,'2020-11-12',3),('495',6633,'2019-08-17',2),('496',7060,'2020-03-24',4),('497',4805,'2019-06-29',2),('498',4698,'2019-06-05',2),('499',5423,'2020-07-01',5),('5',7047,'2019-12-19',2),('50',7607,'2020-06-25',5),('500',9454,'2020-03-11',2),('51',9127,'2020-07-01',4),('52',1322,'2020-09-09',2),('53',5301,'2020-05-25',5),('54',9127,'2020-03-07',4),('55',5515,'2020-01-20',4),('56',2974,'2019-06-15',3),('57',4077,'2020-01-13',5),('58',7867,'2020-01-10',4),('59',5423,'2020-01-06',2),('6',7444,'2020-03-11',3),('60',4781,'2020-10-27',4),('61',8811,'2020-10-05',4),('62',992,'2019-12-28',5),('63',2427,'2019-07-02',4),('64',2827,'2019-07-07',3),('65',2427,'2019-03-08',5),('66',4781,'2019-05-12',5),('67',5499,'2020-08-22',2),('68',374,'2020-08-04',4),('69',5946,'2019-08-19',3),('7',374,'2019-09-05',1),('70',5916,'2019-12-16',1),('71',7444,'2019-10-30',4),('72',5946,'2020-05-03',2),('73',4698,'2020-03-25',4),('74',7955,'2020-03-09',1),('75',5515,'2019-06-05',2),('76',7867,'2019-08-02',4),('77',8089,'2020-08-09',2),('78',7060,'2019-04-04',4),('79',9127,'2019-03-08',2),('8',992,'2019-06-04',4),('80',1704,'2019-11-10',3),('81',5417,'2019-10-17',4),('82',8811,'2019-06-19',2),('83',2974,'2019-07-13',3),('84',992,'2020-03-04',5),('85',9454,'2019-09-15',1),('86',2017,'2020-07-28',3),('87',8002,'2019-11-09',3),('88',9127,'2019-09-30',5),('89',8811,'2020-10-23',3),('9',1704,'2019-05-05',3),('90',8811,'2020-11-23',2),('91',9454,'2019-12-26',1),('92',8002,'2020-04-27',2),('93',7047,'2020-07-30',3),('94',1516,'2019-10-17',2),('95',7425,'2020-04-22',1),('96',4077,'2020-08-28',4),('97',6666,'2020-09-27',4),('98',7897,'2020-09-16',1),('99',992,'2020-07-25',5);

/*EXERCISE C 1* Trigger 1*/

DELIMITER $$
 CREATE TRIGGER  update_stock
 AFTER INSERT ON order_details 
 FOR EACH ROW 
 BEGIN 
 UPDATE product
 SET product.product_qty = product.product_qty - New.order_qty 
 WHERE product.Product_ID = New.Product_ID;
 END$$
DELIMITER ;


/*EXERCISE C 2* trigger number 2*/

delimiter $$
create trigger update_price
after update
on product
for each row
Begin 
	insert into product_log (PRODUCT_ID, UNIT_PRICE, PRODUCT_LOG_DATE) values
    (new.product_id, new.unit_price, now());
End $$
delimiter ;

/*EXERCISE H Invoice for the head and totals*/
DROP VIEW IF EXISTS invoice_total;
CREATE VIEW invoice_total AS
SELECT o.invoice_id,
o.invoice_date,
o.payment_date, 
o.sub_total,
(o.tax_rate * 100) as 'tax_rate_%',
(o.sub_total * o.discount) as 'Discount_amount',
(o.sub_total * (1-o.discount)* o.tax_rate) as 'Tax',
o.total,
concat(c.first_name, ' ', c.last_name) as 'Customer_Name',
c.billing_address,
concat(c.city, ',', c.country) as 'Location',
c.zip_code
FROM `order` o
JOIN customer c on c.customer_id = o.customer_id;


/*EXERCISE H Invoice for the details*/

DROP VIEW IF EXISTS invoice_details;
CREATE VIEW invoice_details AS
SELECT o.invoice_id, p.product_name,
od.unit_price, od.order_qty, od.sub_total
FROM `order_details` as od
LEFT JOIN `product` as p
ON p.product_id=od.product_id
LEFT JOIN `order` as o
ON od.ORDER_ID=o.ORDER_ID;




